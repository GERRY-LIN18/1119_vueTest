"use strict";(self["webpackChunk_1119_vuetest"]=self["webpackChunk_1119_vuetest"]||[]).push([[649],{9649:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var n=r(3396),i=r(9242),o=r(7139);const u={id:"app",class:"wrapper"},l=(0,n._)("br",null,null,-1),s={key:1,class:"productContainer"},c=["src","alt"],a=["onClick"],d=["onUpdate:modelValue"],h=["onClick"];function p(t,e,r,p,m,g){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("main",null,[(0,n._)("header",null,[(0,n.Uk)(" search: "),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>m.search=t)},null,512),[[i.nr,m.search]]),l,(0,n.Uk)(" $"),(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>m.min=t)},null,512),[[i.nr,m.min]]),(0,n.Uk)("-"),(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>m.max=t)},null,512),[[i.nr,m.max]])]),m.load?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)("loading...")],64)):((0,n.wg)(),(0,n.iD)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.product,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:t.id},[(0,n._)("p",null,(0,o.zw)(t.title),1),(0,n.Uk)(" "+(0,o.zw)(g.parseRating(t.rating))+" ",1),(0,n._)("img",{src:t.image,alt:t.title},null,8,c),(0,n._)("p",null,(0,o.zw)(g.parsePrice(t.price))+"ÂÖÉ",1),(0,n._)("div",null,[(0,n._)("button",{onClick:r=>g.reduceCount(e,t)},"-",8,a),(0,n.wy)((0,n._)("input",{type:"number",min:"0","onUpdate:modelValue":t=>m.count[e]=t},null,8,d),[[i.nr,m.count[e]]]),(0,n._)("button",{onClick:r=>g.addCount(e,t)},"+",8,h)])])))),128))]))]),(0,n._)("aside",null,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.order,((t,e)=>((0,n.wg)(),(0,n.iD)("li",{key:t.id},(0,o.zw)(e)+"-"+(0,o.zw)(t.title)+": "+(0,o.zw)(t.count),1)))),128))]),(0,n._)("p",null,"Á∏ΩÂÉπÔºö"+(0,o.zw)(g.total)+"ÂÖÉ",1)])])}r(7658);var m={data(){return{load:!1,source:[],sourceCount:0,order:[],count:[],search:"",min:0,max:0}},computed:{product(){let t=this.source;return this.min>0&&(t=t.filter(((t,e)=>t.price>this.min))),this.max>0&&(t=t.filter((t=>t.price<this.max))),""!==this.search&&(t=t.filter((t=>t.title.includes(this.search)))),t},total(){let t=0;for(const e in this.product)t+=this.count[e]*this.product[e]["price"];return parseInt(t)}},watch:{total:{handler:function(t,e){t>1e3&&alert("‰Ω†Ë¶ÅÈ§ìÊ≠ª‰∫Ü")}}},methods:{parseRating(t){if(!t)return null;let e="";const r=parseInt(t.rate);for(let n=0;n<r;n++)e+="üåü";return`${e}${t.count}`},parsePrice(t){return"TWD "+33*t},getResource(){this.load=!0,fetch("https://fakestoreapi.com/products/").then((t=>t.json())).then((t=>{for(item in this.source=t,this.product)this.count.push(0);this.load=!1,this.sourceCount=this.source.length}))},addCount(t,e){this.count[t]+=1;const r=this.order.findIndex((t=>(console.log(t),t.id===e.id)));r>=0?this.order[r]["count"]+=1:this.order.push({id:e.id,title:e.title,price:e.price,count:1}),this.setStorage()},reduceCount(t,e){if(this.count[t]<=0)return;this.count[t]-=1;const r=this.order.findIndex((t=>t.id===e.id));r<0||(this.order[r]["count"]>1?this.order[r]["count"]-=1:this.order.splice(r,1),this.setStorage())},getStorage(){let t=localStorage.getItem("turleShop");t=JSON.parse(t),this.order=t||[]},setStorage(){const t=JSON.stringify(this.order);localStorage.setItem("turleShop",t)}},created(){},mounted(){this.getResource(),this.getStorage(),this.sourceCount=this.source.length},beforeUnmount(){}},g=r(89);const w=(0,g.Z)(m,[["render",p]]);var f=w}}]);
//# sourceMappingURL=649.558ad531.js.map